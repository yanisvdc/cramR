% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cram_experiment.R
\name{cram_experiment}
\alias{cram_experiment}
\title{CRAM Experiment with Confidence Interval and Standard Error Calculation}
\usage{
cram_experiment(
  X,
  D,
  Y,
  batch,
  model_type = "causal_forest",
  learner_type = "ridge",
  baseline_policy = NULL,
  parallelize_batch = FALSE,
  model_params = NULL,
  custom_fit = NULL,
  custom_predict = NULL,
  alpha = 0.05
)
}
\arguments{
\item{X}{A matrix or data frame of covariates for each sample.}

\item{D}{A vector of binary treatment indicators (1 for treated, 0 for untreated).}

\item{Y}{A vector of outcome values for each sample.}

\item{batch}{Either an integer specifying the number of batches (to be created by random sampling) or a list/vector providing specific batch indices.}

\item{model_type}{The model type for policy learning. Options include \code{"Causal Forest"}, \code{"S-learner"}, and \code{"M-learner"}. Default is \code{"Causal Forest"}.}

\item{learner_type}{The learner type for the chosen model. Options include \code{"ridge"} for Ridge Regression and \code{"FNN"} for Feedforward Neural Network. Default is \code{"ridge"}.}

\item{baseline_policy}{A list providing the baseline policy (binary 0 or 1) for each sample. If \code{NULL}, defaults to a list of zeros with the same length as the number of samples in \code{X}.}

\item{alpha}{Significance level for confidence intervals. Default is 0.05 (95% confidence).}
}
\value{
A list containing:
  \describe{
    \item{final_policy_model}{The final fitted policy model, depending on \code{model_type} and \code{learner_type}.}
    \item{proportion_treated}{The proportion of individuals treated under the final policy.}
    \item{delta_estimate}{The estimated treatment effect (delta) across the batches.}
    \item{delta_standard_error}{The standard error of the delta estimate.}
    \item{delta_confidence_interval}{The confidence interval for the delta estimate.}
    \item{policy_value_estimate}{The estimated policy value.}
    \item{policy_value_standard_error}{The standard error of the policy value estimate.}
    \item{policy_value_confidence_interval}{The confidence interval for the policy value estimate.}
  }
}
\description{
This function performs a cumulative randomized assignment model (CRAM) experiment to estimate treatment effects. It calculates confidence intervals, standard errors, and the proportion of treated individuals under the learned policy.
}
\examples{
# Example data
X_data <- matrix(rnorm(100 * 5), nrow = 100, ncol = 5)  # 100 samples, 5 features
D_data <- sample(c(0, 1), 100, replace = TRUE)          # Random binary treatment assignment
Y_data <- rnorm(100)                                    # Random outcome variable
nb_batch <- 3                                           # Number of batches

# Perform CRAM experiment
result <- cram_experiment(X = X_data, D = D_data, Y = Y_data, batch = nb_batch)

# Access results
result$delta_estimate
result$delta_confidence_interval
result$policy_value_estimate
}
\seealso{
\code{\link[grf]{causal_forest}}, \code{\link[glmnet]{cv.glmnet}}, \code{\link[keras]{keras_model_sequential}}
}
