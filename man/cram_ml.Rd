% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cram_ml.R
\name{cram_ml}
\alias{cram_ml}
\title{CRAM ML - Simultaneous Machine Learning and Evaluation}
\usage{
cram_ml(
  data,
  batch,
  formula = NULL,
  caret_params = NULL,
  parallelize_batch = FALSE,
  loss_name = "accuracy",
  custom_fit = NULL,
  custom_predict = NULL,
  custom_loss = NULL,
  alpha = 0.05
)
}
\arguments{
\item{data}{A matrix or data frame of covariates. For supervised learning,
must include the target variable specified in `formula`.}

\item{batch}{Integer specifying number of batches or vector of pre-defined
batch assignments.}

\item{formula}{Optional formula for supervised learning (e.g., y ~ .).
Use NULL for unsupervised methods like clustering.}

\item{caret_params}{List of parameters for `caret::train()` containing:
\itemize{
  \item{method: Model type (e.g., "rf", "glm", "xgbTree" for supervised;
        "kmeans" for clustering)}
  \item{Additional method-specific parameters}
}}

\item{parallelize_batch}{Logical indicating whether to parallelize batch
processing (default = FALSE).}

\item{loss_name}{Name of loss metric (supported: "mse", "logloss",
"accuracy", "euclidean_distance", "pca_projection_error").}

\item{custom_fit}{Optional custom model training function.}

\item{custom_predict}{Optional custom prediction function.}

\item{custom_loss}{Optional custom loss function.}

\item{alpha}{Confidence level for intervals (default = 0.05).}
}
\value{
A list containing:
\itemize{
  \item{raw_results: Data frame with performance metrics}
  \item{interactive_table: DT::datatable interactive view}
  \item{final_ml_model: Trained model object}
}
}
\description{
Performs the CRAM method (Causal Regularization via Approximate Models) for
simultaneous machine learning and evaluation in experimental or observational
studies with unknown data generating processes.
}
\details{
The CRAM method implements a novel approach for simultaneous model
training and evaluation under unknown data distributions. Key features:
\itemize{
  \item{Automated batch-wise model training}
  \item{Cross-validation compatible}
  \item{Supports both supervised and unsupervised learning}
  \item{Provides confidence intervals for loss estimates}
}
}
\examples{
\donttest{
# Supervised learning example
library(caret)
set.seed(42)
data(mtcars)

caret_params <- list(
  method = "glm",
  trControl = trainControl(method = "cv", number = 5)
)

result <- cram_ml(
  data = mtcars,
  formula = mpg ~ .,
  batch = 5,
  caret_params = caret_params,
  loss_name = "mse"
)

print(result$raw_results)
}

}
\seealso{
\code{\link[caret]{train}} for model training parameters
\code{\link[stats]{kmeans}} for unsupervised clustering
\code{\link[DT]{datatable}} for interactive tables
}
